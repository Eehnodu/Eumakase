# 🎧 음악하세(팀명: 도개발윷모)
![logo2](https://github.com/Eehnodu/FinalProject/assets/155136516/bfd18320-d52d-48a5-a1aa-3d7a547f3dc7)

## 👀 서비스 소개
* 서비스명: AI를 활용한 음악 추천 서비스 반응형 웹
* 서비스설명: 사용자가 입력한 현재 상태 정보를 기반으로 AI를 이용하여 플레이리스트를 추천 및 다양한 플레이리스트 제공, 차트를 활용한 사용자 개인 데이터 시각화
<br>


## 📅 프로젝트 기간
2024.05.01 ~ 2024.06.20 (6주)
<br>

## ⭐ 주요 기능
* 기능1 : 선호도 및 사용자 상태 파악 질문
* 기능2 : 선호도 평가 질문 제시(회원가입 시)
* 기능3 : 질문을 통한 사용자 분석 및 AI를 활용한 플레이리스트 추천
* 기능4 : 계절 및 장르별 자동 추천
* 기능5 : Chart.js를 활용한 개인 및 사용자 데이터 시각화
* 기능6 : 음원 및 큐레이션 데이터 크롤링
* 기능7 : 검색 기능
* 기능8 : 머신러닝(XgBoost)를 활용한 AI 개발
<br>

<details>
<summary><b>주요 기능 설명 펼치기</b></summary>
<div markdown="1">

* 기능1 : 선호도 및 사용자 상태 파악 질문
* 기능2 : 선호도 평가 질문 제시(회원가입 시)
* 기능3 : 질문을 통한 사용자 분석 및 AI를 활용한 플레이리스트 추천
* 기능4 : 계절 및 장르별 자동 추천
* 기능5 : Chart.js를 활용한 개인 및 사용자 데이터 시각화
* 기능6 : 음원 및 큐레이션 데이터 크롤링
* 기능7 : 검색 기능
* 기능8 : 머신러닝(XgBoost)를 활용한 AI 개발

</div>
</details>

## ⛏ 기술스택
<table>
    <tr>
        <th>구분</th>
        <th>내용</th>
    </tr>
    <tr>
        <td>사용언어</td>
        <td>
            <img src="https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white"/>
            <img src="https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=HTML5&logoColor=white"/>
            <img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=CSS3&logoColor=white"/>
            <img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=white"/>
	    <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white"/>
        </td>
    </tr>
    <tr>
        <td>라이브러리</td>
        <td>
	<img src="https://img.shields.io/badge/AJAX-FFFFFF?style=for-the-badge"/>
	<img src="https://img.shields.io/badge/BootStrap-7952B3?style=for-the-badge&logo=BootStrap&logoColor=white"/>
          <img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white">
        </td>
    </tr>
    <tr>
        <td>개발도구</td>
        <td>
	    <img src="https://img.shields.io/badge/Eclipse-2C2255?style=for-the-badge&logo=Eclipse&logoColor=white"/>
            <img src="https://img.shields.io/badge/VSCode-007ACC?style=for-the-badge&logo=VisualStudioCode&logoColor=white"/>
	    <img src="https://img.shields.io/badge/Jupyter%20Notebook-F37626.svg?&style=for-the-badge&logo=Jupyter&logoColor=white"/> 
        </td>
    </tr>
    <tr>
        <td>서버환경</td>
        <td>
            <img src="https://img.shields.io/badge/Apache Tomcat-D22128?style=for-the-badge&logo=Apache Tomcat&logoColor=white"/>
            <img src="https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=Flask&logoColor=white"/> 
        </td>
    </tr>
    <tr>
        <td>데이터베이스</td>
        <td>
            <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
        </td>
    </tr>
    <tr>
        <td>협업도구</td>
        <td>
            <img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white"/>
            <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"/>
        </td>
    </tr>
</table>


<br>

## ⚙ 시스템 아키텍처
![image](https://github.com/2024-SMHRD-KDT-BigData-23/FitNeeds/assets/155136709/911d56fd-1a63-4e86-a44b-98940a326cba)
아키텍쳐 새로 만들것!!!
<br>

## 📌 SW유스케이스
![유스케이스](https://github.com/Eehnodu/Project/assets/155121578/3f63bc55-87c4-45ad-ad3d-eac5cff29e1f)
<br>

## 📌 서비스 흐름도
![서비스흐름도 drawio](https://github.com/Eehnodu/FinalProject/assets/155136516/f075a2c5-248b-4966-a844-db612f811ac3)
<br>

## 📌 ER다이어그램
<img width="741" alt="ERD(ver Aquery)" src="https://github.com/Eehnodu/crawling_test/assets/155121578/a98b1740-c2f2-487b-992e-c85420a637b6">
<br>

## 🖥 화면 구성







|🎞 서비스 소개 페이지 |
|:---:|
| ![image](https://github.com/Eehnodu/Portfolio/assets/155121578/e1f6280f-5398-4ab4-8f67-68d50268344d)|

|🎞 메인 페이지 |
|:---:|
|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/df0c6a8b-13ed-4575-85e6-464859130e81)|

|🎞 AI 추천 페이지 |🎞 AI 추천 결과 페이지 |
|:---:|:---:|
|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/906efd8b-648d-464c-97e2-9d42f6b2ab82)|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/0ed2e567-9a0f-45d9-b166-54c6d5528e11)|

|🎞 마이 페이지 |
|:---:|
|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/3f67348a-3090-448a-8f16-307e1c7ac7a6)|

|🎞 플레이리스트 상세 페이지 |
|:---:|
|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/3f67348a-3090-448a-8f16-307e1c7ac7a6)|

|🎞 곡 상세 정보 페이지 |
|:---:|
|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/3f67348a-3090-448a-8f16-307e1c7ac7a6)|

|🎞 검색 페이지 |
|:---:|
|![image](https://github.com/Eehnodu/Portfolio/assets/155121578/3f67348a-3090-448a-8f16-307e1c7ac7a6)|



## 👨‍👩‍👦‍👦 팀원 역할
<table>
  <tr>
    <td align="center"><img src="https://i.namu.wiki/i/GirsrnQUH-q5qbVv871h4zLg_H1X25k25qY-Vr5DcO6xV8MWdcENwySAA0M62Xyurjt3ezZUbPm7GoVYJRRXWGIAXpWJ0_zsEH0mxNsLH2S_GX54w9exBaOg6io06JjbYZRHQiPSyUwPoLzRFA5aeQ.webp" width="100" height="100"/></td>
    <td align="center"><img src="https://mb.ntdtv.kr/assets/uploads/2019/01/Screen-Shot-2019-01-08-at-4.31.55-PM-e1546932545978.png" width="100" height="100"/></td>
    <td align="center"><img src="https://github.com/2024-SMHRD-KDT-BigData-23/FitNeeds/assets/155136709/60cfda0f-23f4-4e5d-a953-12565033b91b" height="100"/></td>
    <td align="center"><img src="https://i.pinimg.com/236x/ed/bb/53/edbb53d4f6dd710431c1140551404af9.jpg" width="100" height="100"/></td>
    <td align="center"><img src="https://pbs.twimg.com/media/B-n6uPYUUAAZSUx.png" width="100" height="100"/></td>
  </tr>
  <tr>
    <td align="center"><strong>김동현</strong></td>
    <td align="center"><strong>엄희수</strong></td>
    <td align="center"><strong>우동희</strong></td>
    <td align="center"><strong>조범수</strong></td>
    <td align="center"><strong>정규원</strong></td>
  </tr>
  <tr>
    <td align="center"><b>Back-end, DB</b></td>
    <td align="center"><b>Front-end</b></td>
    <td align="center"><b>Back-end, DB, Modeling</b></td>
    <td align="center"><b>Front-end, Back-end</b></td>
    <td align="center"><b>Front-end</b></td>
  </tr>
  <tr>
    <td align="center"><a href="https://github.com/dohdark" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/heesooooooo" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/Eehnodu" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/beomsu-j" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/Jungkyuwonnn" target='_blank'>github</a></td>
  </tr>
  <tr>
    <td align="center"><b>Crawling<br><br>큐레이션 및 음원 통합 데이터 전처리<br><br>선호도 조사 기능 구<br><br>마이페이지 개인 플레이리스트 구현<br></td>
    <td align="center"><b>UI/UX 디자인<br></td>
    <td align="center"><b>PM<br><br>DB 설계 및 구축<br><br>XgBoost를 활용한 AI 개발<br><br>Crawling<br><br>Flask를 통한 AI 추천 결과 연동<br><br>다른 사용자들의 플레이리스트 화면  구현<br><br>상세 플레이리스트 화면 구현<br><br>계절별 추천 플레이리스트<br></td>
    <td align="center"><b>Crawling<br><br>OpenCV를 통한 색감 정보 추출<br><br>Google Vision, Transtation API를 활용한 이미지 객체 인식 구현<br><br>텍스트마이닝을 통한 큐레이션 데이터 분석<br><br>(차트 기술)통한 데이터 시각화<br></b></td>
    <td align="center"><b>UI/UX 디자인<br></b></td>
  </tr>
</table>

## 🤾‍♂️ 트러블슈팅


<details>
<summary>
### 🔨 차트의 오버랩 문제<br>
</summary>
- 문제<br>

  메인 페이지 접속시 오늘 날짜를 기준으로 7일전까지의 데이터를 가져와 시각화함.
  원하는 날짜로 바꾸어 차트의 값을 업데이트 할 경우 기존의 차트가 사라지지 않고 새로운 차트가 덧씌워지는 문제가 발생.

- 원인<br>

  new 연산자를 이용해 새로운 메모리로 할당됨에따라 canvas를 초기화하는게 아닌
  새로운 chart가 기존 차트에 덧씌우듯 표시되는 문제라 사료됨.
 
- 해결방안<br>

  update 메소드와 destroy 메소드 사용.
  update 메소드를 사용하였으나 console.log로 확인하였을때 값의 변경이 일어났지만 기존 차트는 유지됨.
  destory 메소드를 사용하여 기존의 차트 객체를 삭제하고 다시 설정해주는 방법으로 해결.
 
- 코드<br>
```
$("#date_check").on("click", function() {
		let start_date = $("#dateFrom").val();
		let end_date = $("#dateTo").val();
		
		// 기존 차트 데이터 삭제
		if(doughnutChart != undefined){
			doughnutChart.destroy();
		}
		if(lineChart != undefined){
			lineChart.destroy();
		}
		fetchStartExChart(start_date, end_date);
		fetchStartChChart(start_date, end_date);
	});
```
</details>

<details>
<summary>
### 🔨 비밀번호 암호화(SHA-256 + Salt)<br>
</summary>
- 문제<br>

  SHA-256은 단방향 알고리즘의 한 종류로, 해시 값을 이용한 암호화 방식.
  SHA-256을 사용하였을때 같은 비밀번호일 경우 같은 해시 값을 반환함을 확인.

- 원인<br>

  SHA-256은 입력 값에 해당하는 해시 값이 정해져 있음.
  레인보우 테이블을 이용해 해시 값을 통해 원본 문자열의 유추가 가능해짐.
  레인보우 테이블이란? => 해시 함수의 모든 입력값에 대한 결과값을 표로 정리한 것.
 
- 해결방안<br>

  무작위 숫자를 바이트 배열로 변환하여 이를 10진수 문자열로 변환한 Salt값을 추가로 생성.
  로그인 및 개인정보 수정 시 비밀번호의 확인을 위해 해당 Salt값을 알아야하기 때문에
  Member_id에 해당하는 Salt값을 저장하는 tb_salt 테이블을 생성 및 저장.
 
- 코드<br>
```
public class Encrypt {
	/**
	 * 무작위 문자열 Salt 생성
	 * 
	 * @return 생성된 Salt 문자열
	 */
	public static String getSalt() {
		// 1. SecureRandom 객체 생성
		SecureRandom sr = new SecureRandom();
		// 2. 무작위 바이트 배열 salt 생성 (길이: 20)
		byte[] salt = new byte[20];
		// 3. 무작위 바이트로 salt 배열 채우기
		sr.nextBytes(salt);
		// 4. 바이트 배열을 16진수 문자열로 변환하여 반환
		StringBuffer sb = new StringBuffer();
		for (byte b : salt) {
			sb.append(String.format("%02x", b));
		}
		return sb.toString();
	}
	/**
	 * 주어진 암호와 Salt를 이용하여 SHA-256 알고리즘을 적용한 결과를 반환
	 * 
	 * @param pwd  암호
	 * @param salt Salt 문자열
	 * @return 암호와 Salt를 이용하여 적용한 SHA-256 알고리즘 결과
	 */
	public static String getEncrypt(String pwd, String salt) {
		String result = "";
		try {
			// 1. SHA-256 알고리즘을 적용할 MessageDigest 객체 생성
			MessageDigest md = MessageDigest.getInstance("SHA-256");
			// 2. 암호와 Salt를 이용하여 MessageDigest 업데이트
			md.update((pwd + salt).getBytes());
			// 3. 업데이트된 내용으로 해시값 계산
			byte[] pwdSalt = md.digest();
			// 4. 해시값을 16진수 문자열로 변환하여 반환
			StringBuffer sb = new StringBuffer();
			for (byte b : pwdSalt) {
				sb.append(String.format("%02x", b));
			}
			result = sb.toString();
		} catch (NoSuchAlgorithmException e) {
			throw new RuntimeException(e);
		}
		return result;
	}
}
```
</details>
우리꺼로 작성할 것!!

